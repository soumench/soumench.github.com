<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
</head>

<body>
<h3>Tense Detector</h3>
 <input type="text" id="verbinbox" onkeyup="update()" placeholder="enter a verb phrase"><br>
 
 <span id="whichtense" style="color:purple"></span><br>
 
 <span id="vardisplay" style="color:red"></span><br>

<script src="isparticiple.js"></script>
<script src="eclean.js"></script>
<script>
    const goodauxiliaries={"": 1,has:2,have:2,had:3,"will have":4,"shall have":4};

    update();

    function update(){
        let auxiliary="";    
        let ispart=0;    
        let lastword="";
        let USERINPUT =  e("verbinbox").value;
        USERINPUT=cleaninput(USERINPUT);
        if(USERINPUT){
            auxiliary=USERINPUT.replace(/\s*\S+$/,"");
            lastword=USERINPUT.replace(/^.*?\s*(\S+)$/,"$1");
        }
        ispart= isparticiple(lastword);
        let auxnumber= goodauxiliaries[auxiliary];
        if(!auxnumber)auxnumber=0; 
        e("whichtense").innerHTML=`userinput (${USERINPUT}) --> ` +(
         (ispart==0)? "NOTHING DETECTED (by bad participle)":
         (auxnumber==0)? "NOTHING DETECTED (by bad auxiliary)":
         (auxnumber == 1)? "just a participle":
         (auxnumber == 2)? "(has|have) + participle":
         (auxnumber == 3)? "had +  participle":
         "(will|shall) + have + participle"
        ) ;
        
        e("vardisplay").innerHTML=`
${auxnumber?"good":"bad"}  auxiliary (${auxiliary}) <br/> 
${ispart?"good":"bad"}  participle (${lastword}) <br/>         
USERINPUT: (${USERINPUT}) <br/> 
auxiliary: (${auxiliary}) <br/> 
auxnumber: (${auxnumber}) <br/> 
lastword: (${lastword}) <br/>
ispart: (${ispart}) <br/>
`;

    }
    
</script>
</body>
</html>

