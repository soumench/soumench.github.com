<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> straightline.html </title>
    <style>
        #container {
          width: 400px;
          height: 400px;
          position: relative;
          background: yellow;
           /* margin: 50px;*/
        }
        #animate {
          width: 50px;
          height: 50px;
          position: absolute;
          background-color: #f8d9d9;
        }
    </style>
</head>

<body>
    <input type="button" value="myMove()" id="btn0" onclick="myMove()">
    <input type="button" value="gumballgo(0,0)" id="btn1" onclick="gumballgo(0,0)">
    <input type="button" value="gumballgo(0,300)" id="btn2" onclick="gumballgo(0,300)">
    <input type="button" value="gumballgo(200,300)" id="btn3" onclick="gumballgo(200,300)">
    <input type="button" value="gumballgo(400,0)" id="btn4" onclick="gumballgo(400,0)">
    <input type="button" value="gumballgo(400,400)" id="btn5" onclick="gumballgo(400,400)">
    
   <!-- <input type="button" value="gumballgo(multi)" id="btn4" onclick="gumballgomulti(110,130)">-->
    <input type="button" value="trigger()" id="btn6" onclick="trigger()">
    
    <div id ="container">
        <canvas id="myCanvas" width="400" height="400" style="border:1px solid #d3d3d3;">
            Your browser does not support the HTML5 canvas tag.</canvas> <br><br><br>
        <img id ="animate" src="GOLU-MOVE.gif" width="50px" height="50px" />
    </div>
    <span id="trace"></span><br>
    <span id="trace2"></span>
    <script>
        const ctx = e('myCanvas').getContext('2d');
        
        let ball = e("animate"); let canvas = e("myCanvas");
        let time;
        
        move(canvas.width/2, canvas.height/2);
            
        let posx;   let posy;
                        
        const stepx=10; const stepy=20;
        function trigger(){
            e("trace").innerHTML="";
            posx=100; posy=100;
            time=setInterval(move_one_step,500);
            let i=0; 
            function move_one_step(){
                i++;
                move(posx+=stepx,posy+=stepy);
                        
                if(i>=10){
                   clearInterval(time); 
                }
                e("trace").innerHTML="i = "+ i+"----"+posx+"----"+posy;
                /*e("trace").innerHTML="i = "+ i+"----"+ball.style.left+"----"+ball.style.top;*/
            }
        }  
        
        function gumballgo(posx, posy){
            e("trace").innerHTML=`The user wants the ball to move to (${posx} , ${posy})`;
            move(posx, posy);
        }
            
        
        function myMove(){
            move(200,300);
            time=setInterval(stay,5000);
            e("trace").innerHTML=""; 
        }
        function move(posx,posy){
            ball.style.left=posx-25+"px";
            ball.style.top=posy-17+"px";
        }
        function stay(){
            clearInterval(time);
            move(100,100);  
        }
       
        ctx.canvas.addEventListener('click', function(event){
            var mouseX = event.clientX - ctx.canvas.offsetLeft;
            var mouseY = event.clientY - ctx.canvas.offsetTop;
            ctx.fillStyle = "orange";
            ctx.fillRect(mouseX-5, mouseY-5, 10, 10);
            /*var message = "user clicked point " +mouseX+" , "+mouseY;*/
            var message = "mouseX mouseY " +mouseX+" , "+mouseY+
            "<br/> clientX clientY "+ event.clientX + " ,  "+ event.clientY+
            "<br/> offesetleft offsettop "+ ctx.canvas.offsetLeft+ " , "+ ctx.canvas.offsetTop   ;
            e("trace2").innerHTML=message;
        });
        
        
        
        function e(id){return document.getElementById(id);}
    </script>
    
    
    <br><br><br><br>
    <footer>
        <a href="testscriptindex.html">Back to list of test scripts</a>
    </footer>

</body>

</html>