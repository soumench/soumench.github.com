<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
</head>

<body>
<h3>Tense Detector</h3>
 <input type="text" id="verbinbox" onkeyup="update()" placeholder="enter a verb phrase"><br>
 
 <span id="status" style="color:purple"></span><br>
 <span id="whichtense" style="color:purple"></span><br>
 
 <span id="aux"></span><br>
 <span id="pastparticiple" style="color:red"></span><br>
 <span id="vardisplay" style="color:red"></span><br>
 <span id="temp"></span>

<script src="isparticiple.js"></script>
<script>
    update();
    
    function update(){
        let auxiliary;    let ispart;    let pastparticiple;
        let VERB =  e("verbinbox").value;
        VERB=cleaninput(VERB);
        let FIRSTHALF="";
        let LASTHALF=""; 
        if(VERB){
            FIRSTHALF=VERB.replace(/\s*\S+$/,"");
            LASTHALF=VERB.replace(/^.*?\s*(\S+)$/,"$1");
        }


        if(isparticiple(VERB)===1){
            e("whichtense").innerHTML=`(${VERB}) IS JUST A PARTICIPLE, not a tense`;
        }
        else if(/^ha(s|ve)\s/.test(VERB) ){
            pastparticiple= VERB.replace(/ha(s|ve)\s/,"" );
            ispart= isparticiple(pastparticiple);
            e("temp").innerHTML = `( ${LASTHALF}) is being fed to the have/has branch`;
            e("whichtense").innerHTML= ispart===1 ?`(${VERB}) IS has / have + space + PARTICIPLE:`:`(${VERB}) NOTHING DETECTED.`;
        }
        else if(/^had\s/.test(VERB) ){
            pastparticiple= VERB.replace(/had\s/,"" );
            ispart= isparticiple(pastparticiple);
            
            e("whichtense").innerHTML= ispart===1 ?`(${VERB}) IS had + space + PARTICIPLE:`:`(${VERB}) NOTHING DETECTED.`;
        }
        else if(/^(will|shall)\shave\s/.test(VERB) ){
            pastparticiple= VERB.replace(/(will|shall)\shave\s/,"" );
            ispart= isparticiple(pastparticiple);
            e("whichtense").innerHTML= ispart===1 ?`(${VERB}) IS will|shall + have + space + PARTICIPLE:`:`(${VERB}) NOTHING DETECTED.`;
        }
        else{
            e("whichtense").innerHTML= `(${VERB}) NOTHING DETECTED.`;
        }
        
        e("vardisplay").innerHTML=`VERB: (${VERB}) <br/> FIRSTHALF: (${FIRSTHALF})  <br/> LASTHALF: (${LASTHALF})  <br/> ispart: (${ispart}) <br/>auxiliary: (${auxiliary}) <br/> pastparticiple: (${pastparticiple})  `;
        
        
    }
        
        
    function cleaninput(input){
        return input.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s\s+$/g," ").toLowerCase();
    }
    function e(id){return document.getElementById(id);}
</script>
</body>
</html>

<!--
 does that make the messagein temp element change?
[14:47:55] ExNoob (later.landman): no, temp element in the have/has branch

[14:48:50] Takni Mistwalker: therefore, right after user types detected, temp element does not change, and it still displays what it was displaying earlier
[14:50:53] Takni Mistwalker: if you only change the temp element when the third branch is taken, the temp element will always show the value that LASTHALF had the last time that the branch was taken
-->
