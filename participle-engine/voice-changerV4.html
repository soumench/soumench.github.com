
<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Change Helper Version 3</title>
    <style>
        body{text-align: left;}
        .activeHelp{ color: blue;}
        .passiveOutput{color: rebeccapurple;}
    </style>
</head>

<body>
    
    <div class="activeInput"> 
        <span class="activeHelp">Subject : (such as Soumen, You) </span><br>   
        <input type="text" id="subjectinbox" onkeyup="update()" ><br>
        <span class="activeHelp">Verb: (such as sees, eat) </span><br>   
        <input type="text" id="verbinbox" onkeyup="update()" ><br>
        <span class="activeHelp">Object (such as elephant, Peter) </span><br>  
        <input type="text" id="objectinbox" onkeyup="update()" >
    </div>
    
    <br>
    <span >Active sentence: </span><br>
    <span id="copyofinput" > </span><br>
    <span>Passive sentence: </span>
    
    <div class="passiveOutput">    
        <span id="objectoutput" > </span>         
        <span  id="displayParticiple"> participle</span>
        <span id="prep">by</span>
        <span id="agentoutput"> </span>
    </div>
    
        <span id="numbertest">Number test</span><br>
trace here  --  <span id="whatever">sub to obj</span>
    
   
    <script src="participle_engine.js"></script> 
    <script>
        e("agentoutput").contentEditable = true; /*to manually capitalize a proper noun e.g. takni >> Takni*/
				
        const SINGULAR=1; const PLURAL=2; const IDK=3;
        let currentnumber=SINGULAR;
        
        function update(){  /* -----update start --------*/
			
			e("copyofinput").innerHTML = e("subjectinbox").value+" "+ e("verbinbox").value+ " "+ e("objectinbox").value;
            
            currentnumber = guessNumber(cleaninput( e("objectinbox").value.toLowerCase() ) );
            
            if( currentnumber === SINGULAR){e("numbertest").style.backgroundColor= "green";}
            if ( currentnumber === PLURAL)   {e("numbertest").style.backgroundColor= "red";}
            if ( currentnumber === IDK)   {e("numbertest").style.backgroundColor= "yellow";}
                
            /*----------------------------------------------------------*/
            
            
            let msg=   e("verbinbox").value.toLowerCase().replace(/^\s+/,"").replace(/\s+$/,"");
            e("displayParticiple").innerHTML =  msg? makeparticiple( msg ): " (...) ";
            
                        
            e("agentoutput").innerHTML = subToObj ( e("subjectinbox").value.toLowerCase() );
            e("objectoutput").innerHTML = e("objectinbox").value; 
			
            if(e("displayParticiple").value.toLowerCase() ==="known"){
                e("prep").innerHTML = "to";
            }else e("prep").innerHTML = "by";
            
        
        } /* -----update end --------*/
        
        function guessNumber(word){
                                
            let plurals = {mice:1,men:1,women:1,people:1,children:1,geese:1,teeth:1,oxen:1};
            let AMBIGUOUS = {deer:1, moose:1, series:1, swine:1, salmon:1, means:1, aircraft:1, offspring:1, species:1, grapefruit:1,sheep:1,fish:1,shrimp:1};
            
            if(/^a\sfew/.test(word) ){return PLURAL;}
            if(/^the\sfew/.test(word) ){return PLURAL;}
            if(/^a\s/.test(word) ) { return SINGULAR;}
            if(/^an\s/.test(word) ){ return SINGULAR; }
            if(/s$/.test(word) ){return PLURAL;}
            if(/^many\s/.test(word) ){return PLURAL;}
            if(/^most\s/.test(word) ){return PLURAL;}
            if(/^some\s/.test(word) ){return PLURAL;}
            
            if(/^all\s/.test(word) ){return PLURAL;}
            
            if( plurals[word]){return PLURAL;}
            if( AMBIGUOUS[word]){return IDK;}
            if( word === "elephant"){return SINGULAR; }
            
            return SINGULAR;
        }
    
        
         function subToObj(txt) {
            var myText;
            switch (txt) {
                case "i": myText = "me"; break;
                case "we":myText = "us";break;
                case "he":myText = "him";break;
                case "she":myText = "her";break;
                case "they":myText = "them";break;
                
                default:myText =  txt; /*-a name should not change the capitalization--*/
            }
            e("whatever").innerHTML = "my input was "+txt+ " and my output is "+myText;
			return myText;
        }
        
 
        
        

        
        function cleaninput(input){return input.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s\s+$/g," ");}
		
		
        
        function e(id){return document.getElementById(id);}
		
    </script>
</body>
</html>
